<h2>Dashboard</h2>

<button (click)="startSimulation()">
    ðŸš¦ DÃ©marrer la simulation
</button>

<button (click)="stopTL()">
    Arreter touts
</button>

<button (click)="restoreTL()">
    Restaurer le feu
</button>

<button (click)="prioritizeLaneByDirection('N')">
    Prioriser la voie au Nord
</button>
<button (click)="prioritizeLaneByDirection('S')">
    Prioriser la voie au Sud
</button>
<button (click)="prioritizeLaneByDirection('E')">
    Prioriser la voie a l'Est
</button>
<button (click)="prioritizeLaneByDirection('W')">
    Prioriser la voie a l'Ouest
</button>
<button (click)="prioritizeLaneByDirection('NS')">
    Prioriser la voie Nord-Sud
</button>
<button (click)="prioritizeLaneByDirection('WE')">
    Prioriser la voie Ouest-Est
</button>

<div>
    <h3>Etat feu tricolor</h3>
        <table>
            <tr>
                <th>ID</th>
                <td>{{ traffic_light.tl_id }}</td>
            </tr>
            <tr>
                <th>code</th>
                <td>{{ traffic_light.code }}</td>
            </tr>
            <tr>
                <th>type</th>
                <td>{{ traffic_light.type }}</td>
            </tr>
            <tr>
                <th>Phase</th>
                <td>{{ traffic_light.phase }}</td>
            </tr>
            <tr>
                <th>Duration</th>
                <td>{{ traffic_light.duration }}</td>
            </tr>
            <tr>
                <th>Temps restant avant le prochaine changement</th>
                <td>{{ traffic_light.remaining_time }}</td>
            </tr>
            <tr>
                <th>lane (voie)</th>
                <th>Signal</th>
                <th>Nombre de voitures</th>
                <th>Occupation</th>
                <th>Vitesse moyenne</th>
                <th>Temps d'attente</th>
                <th>Prioriser</th>
            </tr>
            @for (lane of tl_lanes; track lane.id) {
              <tr>
                <th>{{ lane.id }}</th>
                <td>[{{ lane.signal }}] - {{ lane.meaning }} </td>
                <td>{{ lane.num_vehicles }}</td>
                <td>{{ lane.occupancy }}</td>
                <td>{{ lane.mean_speed }}</td>
                <td>{{ lane.waiting_time }}</td>
                <td><button (click)=prioritizeLane(lane.index)>Prioriser</button></td>
              </tr>
            }
        </table>
</div>
